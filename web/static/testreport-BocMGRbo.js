import{_ as B,c as N,u as S,aA as V,i as $,aB as D}from"./index-B6WbZO8q.js";import{l as P,r as h,aR as T,z as v,B as a,R as n,L as j,J as i,u as o,al as m,aS as A,A as w,P as r,O as _}from"./vue-CdYMfVVj.js";import{a as x}from"./comp-ClzPtuSi.js";import"./element-GwJlJi_X.js";import"./editor-Dhn2M38E.js";const M={class:"pagelistbox"},E={class:"c-tablebox tableboxContain c-tooltip"},F={class:"bodybox"},H={class:"c-scroll-contain"},I={class:"c-scroll-contain"},J={class:"c-scroll-contain"},L={class:"c-scroll-contain"},O=["onClick"],G=["onClick"],K={class:"c-emptybox"},Q={key:0,class:"c-pagination"},U={__name:"testreport",setup(W){const p=T(),b=A(),y=S();let s=P({page:1,pagesize:30,plan_id:0});const d=h(0);N(s,p.query);let f=h([]);const u=c=>{V(s).then(t=>{let l=t.rows||[];f.value=l,d.value=t.total_records});{let t={...p.query,...s};b.replace({path:p.path,query:t})}};u();const g=h(null),z=c=>{_this.$confirm("确定要删除所选数据?").then(t=>{D({id:c.id}).then(l=>{_this.$message("删除成功"),u()})})},C=c=>{b.push({path:"/testreport/detail",query:{id:c.id,fpath:p.fullPath}})};return(c,t)=>{const l=m("el-table-column"),k=m("el-table"),R=m("el-pagination");return w(),v("div",M,[t[5]||(t[5]=a("div",{class:"c-titlebox"},[a("span",{class:"title"},"测试报告")],-1)),a("div",E,[a("div",F,[n(k,{"tooltip-effect":"light",ref_key:"tableRef",ref:g,border:"",data:o(f),"max-height":o(y).getters.innerHeight-138,style:{width:"100%"}},{empty:i(e=>[a("div",K,[n($,{type:"empzwssjg",width:"100",height:"100"}),t[4]||(t[4]=_("暂无数据~~"))])]),default:i(()=>[n(l,{prop:"id",width:"70",label:"id"}),n(l,{label:"报告名称"},{default:i(e=>[a("div",H,r(e.row.name),1)]),_:1}),n(l,{label:"计划名称"},{default:i(e=>[a("div",I,r(e.row.plan_name),1)]),_:1}),n(l,{align:"right",label:"通过数 / 失败数 / 执行用例数"},{default:i(e=>[a("div",J,r(e.row.test_pass_count)+" / "+r(e.row.test_fail_count)+" / "+r(e.row.execute_count),1)]),_:1}),n(l,{align:"right",width:"90",label:"通过率"},{default:i(e=>[a("div",L,r(e.row.execute_count?(e.row.test_pass_count/e.row.execute_count*100).toFixed(2)+"%":""),1)]),_:1}),n(l,{width:"160",align:"center",label:"用例时间"},{default:i(e=>[_(r(o(x)(e.row.updated_at)||o(x)(e.row.create_at)),1)]),_:1}),n(l,{width:"200",align:"center",label:"操作"},{default:i(e=>[a("div",{onClick:q=>C(e.row),class:"c-table-ibtn"},t[2]||(t[2]=[a("span",{class:"iconfont icon-liebiao-baogao"},null,-1),_(" 查看报告 ")]),8,O),a("div",{onClick:q=>z(e.row),class:"c-table-ibtn c-btn-del"},t[3]||(t[3]=[a("span",{class:"iconfont icon-shuzhuang-shanchu"},null,-1),_(" 删除 ")]),8,G)]),_:1})]),_:1},8,["data","max-height"]),d.value>0?(w(),v("div",Q,[n(R,{"hide-on-single-page":!1,background:"","page-size":o(s).pagesize,"current-page":o(s).page,onSizeChange:t[0]||(t[0]=e=>{o(s).pagesize=e,o(s).page=Math.min(Math.ceil(d.value/o(s).pagesize),o(s).page),u()}),onCurrentChange:t[1]||(t[1]=e=>{o(s).page=e,g.value&&g.value.scrollTo(0,0),u()}),"page-sizes":[30,50,100,900],layout:"total,sizes,jumper,prev, pager, next",total:d.value},null,8,["page-size","current-page","total"])])):j("",!0)])])])}}},ae=B(U,[["__scopeId","data-v-5f054858"]]);export{ae as default};
