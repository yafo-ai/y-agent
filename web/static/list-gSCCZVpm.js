import{l as Se,r as h,aR as qe,z as w,B as l,R as s,J as o,al as f,u as _,I as H,L as z,Q as D,aS as Be,A as m,O as d,P as y,a6 as J,W as V,E as N,D as B,K as pe,S as ue}from"./vue-CdYMfVVj.js";import{_ as Me,c as Re,u as je,l as ce,t as De,r as Ne,i as Z,v as Oe,w as Ae,x as Te,y as Ee,z as Ie,A as Le,B as Fe,C as He,D as Je}from"./index-B6WbZO8q.js";import{i as me,a as Qe}from"./validator-CP7pvMcK.js";import"./element-GwJlJi_X.js";import"./editor-Dhn2M38E.js";const We={class:"pagelistbox"},Ge={class:"c-titlebox"},Ke={class:"btns"},Xe={style:{"margin-bottom":"0"},class:"tabbox"},Ye={class:"c-tablebox tableboxContain c-tooltip"},Ze={class:"bodybox"},el={class:"c-scroll-contain"},ll={class:"c-scroll-contain"},tl={class:"c-scroll-contain"},sl=["onClick"],ol=["onClick"],nl={class:"c-emptybox"},al={style:{height:"auto"}},il={class:"c-cardbox"},rl=["onClick"],dl={class:"c-cardbtn-btns"},pl=["onClick"],ul=["onClick"],cl=["onClick"],ml={class:"top ellipsis"},vl={class:"title ellipsis"},fl={class:"intro"},_l=["title"],bl={key:0,class:"time"},gl={key:1,class:"c-pagination"},yl={key:0,style:{position:"relative"},class:"dformbox"},wl={class:"formtopbox"},xl={class:"namebox"},hl={class:"titlename ellipsis"},Vl={class:"url ellipsis"},kl={class:"numbox ellipsis"},Cl={class:"mcpcardbox utilbox"},zl={style:{margin:"0 20px"}},$l=["onClick"],Ul={class:"name"},Pl={class:"desc"},Sl={key:0,class:"iconfont icon-xuanzhong"},ql={style:{margin:"0 -10px"},class:"jsonbox"},Bl={class:"dialog-footer"},Ml={class:"dformbox"},Rl={class:"dialog-footer"},jl={class:"dformbox"},Dl={class:"c-switchbox"},Nl={class:"switch"},Ol={class:"c-title-l2"},Al={class:"c-tree-tablebox"},Tl={class:"header"},El={class:"citem",style:{width:"calc(50% - 420px)"}},Il={class:"citem",style:{width:"calc(50% - 420px)"}},Ll={class:"citem",style:{width:"200px"}},Fl={class:"citem",style:{width:"200px"}},Hl={class:"citem center",style:{width:"120px"}},Jl={class:"citem",style:{width:"200px"}},Ql={class:"items"},Wl={style:{width:"200px"},class:"citem"},Gl={style:{width:"200px"},class:"citem"},Kl={style:{width:"120px"},class:"citem center"},Xl={style:{width:"200px"},class:"citem"},Yl={style:{width:"120px"},class:"citem end"},Zl=["onClick"],et=["onClick"],lt={key:0,style:{width:"100%"},class:"errtip"},tt={class:"footer"},st={class:"c-title-l2"},ot={class:"c-tree-tablebox"},nt={class:"header"},at={class:"citem",style:{width:"calc(50% - 160px)"}},it={class:"citem",style:{width:"calc(50% - 160px)"}},rt={class:"citem",style:{width:"200px"}},dt={class:"items"},pt={style:{width:"200px"},class:"citem"},ut={style:{width:"120px"},class:"citem end"},ct=["onClick"],mt=["onClick"],vt={key:0,style:{width:"100%"},class:"errtip"},ft={class:"footer"},_t={class:"dialog-footer"},bt={__name:"list",setup(gt){const Q=qe(),ve=Be(),O=je();let v=Se({page:1,pagesize:30,keyword:"",active:"1"});const M=h(0);Re(v,Q.query);let A=h([]);const k=async n=>{n=="init"&&(v.page=1);let e=null,i=ce.cloneDeep(v);if(delete i.active,v.active=="1"?e=await De(i):e=await Ne(i),e){let u=e.rows||[];A.value=u,M.value=e.total_records}if(n!="noquery"){let u={...Q.query,...v};ve.replace({path:Q.path,query:u})}};k("noquery");const W=h(null),fe=n=>{_this.$confirm("确定要删除所选数据?").then(e=>{Ae({id:n.id}).then(i=>{_this.$message("删除成功"),k()})})},P=h(!1),ee=()=>({id:void 0,func_name:"",name:"",tool:"",caption:"",api_url:"",api_method:"POST",is_enable:!1,out_params:[],in_params:[]}),r=h(ee()),G=async n=>{if(v.active=="1"){if(n){let e=await Je({id:n.id});if(!e)return!1;r.value=e}else r.value=ee();P.value=!0,E.value&&E.value.clearValidate()}else v.active=="2"&&(n?(c.value.id=n.id,c.value.name=n.name,c.value.headers=n.headers?JSON.stringify(n.headers):void 0,c.value.server_url=n.server_url,c.value.server_identifier=n.server_identifier):c.value={name:"",headers:"",server_url:"",server_identifier:""},q.value=!0,T.value&&T.value.clearValidate())},T=h(null),E=h(null),_e=n=>{n&&n.validate(e=>{e&&He(r.value).then(i=>{_this.$message("保存成功"),k(),P.value=!1})})},le=h(""),S=h(!1),I=(n,e)=>{const i={id:Date.now(),name:"",data_type:"String"},u=n==="out_params"?{...i,caption:""}:{...i,param_way:"Body",caption:"",is_required:!0,default_value:""};e?(e.children||(e.children=[]),u.param_way="",e.children.push(u),r.value[`${n}`]=[...r.value[`${n}`]]):r.value[`${n}`].push(u)},be=n=>{Oe({id:n.id}).then(e=>{_this.$message("修改成功"),k()})};function ge(n,e){let i=0;return e.forEach(u=>{(u.data&&u.data.name==n||u.name==n)&&(i+=1)}),i>1}const te=(n,e,i)=>{me(n.name)?ge(n.name,e.parent?e.parent.childNodes:e)?n.errtip="参数名不能重复":n.errtip="":n.errtip="参数名只能包含字母、数字和下划线，且不能以数字开头",r.value.in_params=[...r.value.in_params],r.value.out_params=[...r.value.out_params]},se=(n,e,i)=>{n[i]?n.errtip="":n.errtip="参数不能为空",r.value.in_params=[...r.value.in_params],r.value.out_params=[...r.value.out_params]},oe=(n,e)=>n.level>3&&(e=="Object"||e=="Array<Object>"),ne=(n,e,i)=>{const u=n.parent,L=u.data.children||u.data,$=L.findIndex(R=>R.id===e.id);L.splice($,1),r.value.in_params=[...r.value.in_params],r.value.out_params=[...r.value.out_params]},c=h({name:"",server_url:"",server_identifier:"",headers:""}),q=h(!1),ye=n=>{_this.$confirm("确定要删除所选数据?").then(e=>{Ee({id:n.id}).then(i=>{_this.$message("删除成功"),k()})})},we=n=>{n&&n.validate(e=>{if(e){if(c.value.headers)try{let u=JSON.parse(c.value.headers)}catch{_this.$message("请输入正确的json格式");return}let i=ce.cloneDeep(c.value);i.headers=c.value.headers?JSON.parse(c.value.headers):void 0,Fe(i).then(u=>{_this.$message("保存成功"),k(),q.value=!1})}})},b=h(null),K=n=>{le.value=n.name,Te({id:n.id}).then(e=>{e&&(b.value=e,S.value=!0)})},xe=(n,e)=>{A.value=[],M.value=0,k("init")},he=(n,e,i)=>{e===""?i(new Error("唯一标识名称不能为空")):me(e)?i():i(new Error("唯一标识名称只能包含字母、数字和下划线，且不能以数字开头"))},Ve=(n,e,i)=>{e===""?i(new Error("函数名称不能为空")):Qe(e)?i():i(new Error("函数名称只能包含小写字母和下划线"))},ke=n=>{let e=-1;b.value.selected_tools.forEach((i,u)=>{i==n.name&&(e=u)}),e===-1?b.value.selected_tools.push(n.name):b.value.selected_tools.splice(e,1)},ae=n=>{let e=-1;return b.value.selected_tools&&b.value.selected_tools.length>0?(b.value.selected_tools.forEach((i,u)=>{i==n.name&&(e=u)}),e!==-1):!1},Ce=()=>{Le({selected_tools:[...b.value.selected_tools],id:b.value.id}).then(n=>{_this.$message("保存成功"),S.value=!1,k()})},ze=()=>{Ie({id:b.value.id}).then(n=>{K(b.value)})};return(n,e)=>{const i=f("el-button"),u=f("el-tab-pane"),L=f("el-tabs"),$=f("el-table-column"),R=f("el-switch"),$e=f("el-table"),ie=f("el-popover"),j=f("el-scrollbar"),Ue=f("el-pagination"),Pe=f("json-viewer"),X=f("el-drawer"),x=f("el-input"),C=f("el-form-item"),g=f("el-tooltip"),re=f("el-form"),U=f("el-option"),F=f("el-select"),de=f("el-tree");return m(),w(D,null,[l("div",We,[l("div",Ge,[e[38]||(e[38]=l("div",{class:"title"},"工具插件",-1)),l("div",Ke,[s(i,{type:"primary",size:"small",onClick:e[0]||(e[0]=t=>G())},{default:o(()=>e[37]||(e[37]=[d("新增")])),_:1})])]),l("div",Xe,[s(L,{modelValue:_(v).active,"onUpdate:modelValue":e[1]||(e[1]=t=>_(v).active=t),onTabChange:xe,class:"demo-tabs"},{default:o(()=>[s(u,{name:"1"},{label:o(()=>e[39]||(e[39]=[d(" API插件 ")])),_:1}),s(u,{name:"2"},{label:o(()=>e[40]||(e[40]=[d(" MCP插件 ")])),_:1})]),_:1},8,["modelValue"])]),l("div",Ye,[l("div",Ze,[_(v).active==1?(m(),H($e,{key:0,"tooltip-effect":"light",border:"",data:_(A),"max-height":_(O).getters.innerHeight-186,style:{width:"100%"}},{empty:o(t=>[l("div",nl,[s(Z,{type:"empzwssjg",width:"100",height:"100"}),e[43]||(e[43]=d("暂无数据~~ "))])]),default:o(()=>[s($,{prop:"id",width:"70",label:"工具id"}),s($,{label:"函数名称"},{default:o(t=>[l("div",el,y(t.row.func_name),1)]),_:1}),s($,{label:"工具名称"},{default:o(t=>[l("div",ll,y(t.row.name),1)]),_:1}),s($,{label:"工具描述"},{default:o(t=>[l("div",tl,y(t.row.caption),1)]),_:1}),s($,{width:"120",align:"center",label:"工具状态"},{default:o(t=>[s(R,{modelValue:t.row.is_enable,"onUpdate:modelValue":a=>t.row.is_enable=a,"inline-prompt":"",onChange:()=>{be(t.row)},style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ccc"},"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),s($,{width:"200",align:"center",label:"操作"},{default:o(t=>[l("div",{onClick:a=>G(t.row),class:"c-table-ibtn"},e[41]||(e[41]=[l("span",{class:"iconfont icon-xiugai"},null,-1),d(" 修改 ")]),8,sl),l("div",{onClick:a=>fe(t.row),class:"c-table-ibtn c-btn-del"},e[42]||(e[42]=[l("span",{class:"iconfont icon-shuzhuang-shanchu"},null,-1),d(" 删除 ")]),8,ol)]),_:1})]),_:1},8,["data","max-height"])):z("",!0),l("div",al,[_(v).active==2?(m(),H(j,{key:0,ref_key:"tableRef",ref:W,"max-height":_(O).getters.innerHeight-186},{default:o(()=>[l("div",il,[(m(!0),w(D,null,J(_(A),t=>(m(),w("div",{onClick:V(a=>K(t),["stop"]),class:"item"},[s(ie,{width:160},{reference:o(()=>e[44]||(e[44]=[l("span",{class:"iconfont icon-gengduo c-cardbtn-icon"},null,-1)])),default:o(()=>[l("div",dl,[l("div",{onClick:V(a=>K(t),["stop"]),class:"item"},e[45]||(e[45]=[l("span",{class:"name"},"查看",-1)]),8,pl),l("div",{onClick:V(a=>G(t),["stop"]),class:"item"},e[46]||(e[46]=[l("span",{class:"name"},"修改",-1)]),8,ul),l("div",{onClick:V(a=>ye(t),["stop"]),class:"item"},e[47]||(e[47]=[l("span",{class:"name"},"删除",-1)]),8,cl)])]),_:2},1024),l("div",ml," # "+y(t.id),1),l("div",vl,y(t.name),1),l("div",fl,[l("div",{title:t.server_url,class:"server_identifier ellipsis"},y(t.server_url),9,_l),e[48]||(e[48]=l("div",{class:"numbox"},null,-1)),t.tools?(m(),w("div",bl," 共"+y(t.tools.length)+"个工具，已选"+y(t.selected_tools.length)+"个工具集成到系统 ",1)):z("",!0)])],8,rl))),256))])]),_:1},8,["max-height"])):z("",!0)]),M.value>0?(m(),w("div",gl,[s(Ue,{"hide-on-single-page":!1,background:"","page-size":_(v).pagesize,"current-page":_(v).page,onSizeChange:e[2]||(e[2]=t=>{_(v).pagesize=t,_(v).page=Math.min(Math.ceil(M.value/_(v).pagesize),_(v).page),k()}),onCurrentChange:e[3]||(e[3]=t=>{_(v).page=t,W.value&&W.value.scollTo(0,0),k()}),"page-sizes":[30,50,100,900],layout:"total,sizes,jumper,prev, pager, next",total:M.value},null,8,["page-size","current-page","total"])])):z("",!0)])])]),s(X,{modelValue:S.value,"onUpdate:modelValue":e[7]||(e[7]=t=>S.value=t),onClosed:e[8]||(e[8]=t=>S.value=!1),title:"选择工具",size:"800",direction:"rtl"},{default:o(()=>[b.value?(m(),w("div",yl,[l("div",wl,[l("div",xl,[l("div",hl,y(le.value),1),l("div",Vl,y(b.value.server_url),1),l("div",kl,"共"+y(b.value.tools.length)+"个工具，已选"+y(b.value.selected_tools.length)+"个工具集成到系统 ",1)]),s(i,{onClick:e[4]||(e[4]=t=>ze()),size:"small",type:"primary"},{default:o(()=>e[49]||(e[49]=[d("刷新工具")])),_:1})]),l("div",Cl,[s(j,null,{default:o(()=>[l("div",zl,[(m(!0),w(D,null,J(b.value.tools,t=>(m(),w("div",{class:N(["item",{on:ae(t)}]),onClick:a=>ke(t)},[s(ie,{"show-after":300,placement:"right","popper-style":{width:"auto",padding:"10px",minWidth:"80px",maxWidth:"500px"},trigger:"hover"},{reference:o(()=>[l("div",null,[l("div",Ul,y(t.name),1),l("div",Pl,y(t.description),1),ae(t)?(m(),w("span",Sl)):z("",!0)])]),default:o(()=>[l("div",ql,[s(j,{"max-height":600},{default:o(()=>[s(Pe,{"show-array-index":!0,sort:"","expand-depth":4,value:t.inputSchema},null,8,["value"])]),_:2},1024)])]),_:2},1024)],10,$l))),256))])]),_:1})])])):z("",!0),l("div",Bl,[s(i,{type:"primary",onClick:e[5]||(e[5]=t=>Ce())},{default:o(()=>e[50]||(e[50]=[d(" 重新保存选择结果 ")])),_:1}),s(i,{plain:"",onClick:e[6]||(e[6]=t=>S.value=!1)},{default:o(()=>e[51]||(e[51]=[d(" 取消 ")])),_:1})])]),_:1},8,["modelValue"]),s(X,{modelValue:q.value,"onUpdate:modelValue":e[16]||(e[16]=t=>q.value=t),onClosed:e[17]||(e[17]=t=>q.value=!1),title:c.value.id?"修改MCP":"新增MCP",size:"800",direction:"rtl"},{default:o(()=>[l("div",Ml,[s(j,null,{default:o(()=>[s(re,{class:"mg20",onSubmit:e[13]||(e[13]=V(()=>{},["prevent"])),ref_key:"MCPformRef",ref:T,"label-position":"top",inline:"",model:c.value},{default:o(()=>[s(C,{label:"名称",style:{width:"100%","margin-right":"0"},rules:[{required:!0,message:"请输入名称",trigger:"blur"}],prop:"name"},{default:o(()=>[s(x,{modelValue:c.value.name,"onUpdate:modelValue":e[9]||(e[9]=t=>c.value.name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(C,{label:"服务器URL",style:{width:"100%","margin-right":"0"},rules:[{required:!0,message:"请输入服务器URL",trigger:"blur"}],prop:"server_url"},{default:o(()=>[s(x,{modelValue:c.value.server_url,"onUpdate:modelValue":e[10]||(e[10]=t=>c.value.server_url=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(C,{label:"唯一标识名称",rules:[{required:!0,trigger:"blur",validator:he}],style:{width:"100%","margin-right":"0"},prop:"server_identifier"},{label:o(()=>[e[53]||(e[53]=d(" 唯一标识名称 ")),s(g,{"popper-class":"c-flowtip",class:"item",effect:"dark",content:"只能包含字母数字下划线，且数字不可以作为开",placement:"top"},{default:o(()=>e[52]||(e[52]=[l("span",{style:{position:"relative",top:"1px"},class:"iconfont icon-bangzhu"},null,-1)])),_:1})]),default:o(()=>[s(x,{modelValue:c.value.server_identifier,"onUpdate:modelValue":e[11]||(e[11]=t=>c.value.server_identifier=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["rules"]),s(C,{label:"请求头",style:{width:"100%","margin-right":"0"},rules:[{message:"请输入请求头",trigger:"blur"}],prop:"headers"},{label:o(()=>[e[55]||(e[55]=d(" 请求头 ")),s(g,{"popper-class":"c-flowtip",class:"item",effect:"dark",content:'{ "Authorization": "按照MCP提供商要求填写"}',placement:"top"},{default:o(()=>e[54]||(e[54]=[l("span",{style:{position:"relative",top:"1px"},class:"iconfont icon-bangzhu"},null,-1)])),_:1})]),default:o(()=>[s(x,{modelValue:c.value.headers,"onUpdate:modelValue":e[12]||(e[12]=t=>c.value.headers=t),type:"textarea",autosize:{minRows:4,maxRows:12},autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})]),l("div",Rl,[s(i,{type:"primary",onClick:e[14]||(e[14]=t=>we(T.value))},{default:o(()=>e[56]||(e[56]=[d(" 保存并链接服务 ")])),_:1}),s(i,{plain:"",onClick:e[15]||(e[15]=t=>q.value=!1)},{default:o(()=>e[57]||(e[57]=[d(" 取消 ")])),_:1})])]),_:1},8,["modelValue","title"]),s(X,{modelValue:P.value,"onUpdate:modelValue":e[35]||(e[35]=t=>P.value=t),onClosed:e[36]||(e[36]=t=>P.value=!1),title:r.value.id?"修改工具":"新增工具",size:"1400",direction:"rtl"},{default:o(()=>[l("div",jl,[s(j,null,{default:o(()=>[s(re,{class:"mg20",onSubmit:e[32]||(e[32]=V(()=>{},["prevent"])),ref_key:"ruleFormRef",ref:E,"label-position":"top",inline:"",model:r.value},{default:o(()=>[s(C,{label:"",style:{width:"calc(50% - 8px)"},rules:[{required:!0,trigger:"blur",validator:Ve}],prop:"func_name"},{label:o(()=>[e[59]||(e[59]=d(" 函数名称 ")),s(g,{"popper-class":"c-flowtip",class:"item",effect:"dark",content:"为该插件起一个名称，方便大模型调用时使用，请使用小写字母",placement:"top"},{default:o(()=>e[58]||(e[58]=[l("span",{style:{position:"relative",top:"1px"},class:"iconfont icon-bangzhu"},null,-1)])),_:1})]),default:o(()=>[s(x,{modelValue:r.value.func_name,"onUpdate:modelValue":e[18]||(e[18]=t=>r.value.func_name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["rules"]),s(C,{label:"",style:{width:"calc(50% - 8px)","margin-right":"0"},rules:[{required:!0,message:"请输入工具名称",trigger:"blur"}],prop:"name"},{label:o(()=>[e[61]||(e[61]=d(" 工具名称 ")),s(g,{"popper-class":"c-flowtip",class:"item",effect:"dark",content:"给您自己看的名称，可以自行描述",placement:"top"},{default:o(()=>e[60]||(e[60]=[l("span",{style:{position:"relative",top:"1px"},class:"iconfont icon-bangzhu"},null,-1)])),_:1})]),default:o(()=>[s(x,{modelValue:r.value.name,"onUpdate:modelValue":e[19]||(e[19]=t=>r.value.name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(C,{label:"",style:{width:"100%","margin-right":"0"},rules:[{required:!0,message:"请输入工具描述",trigger:"blur"}],prop:"caption"},{label:o(()=>[e[63]||(e[63]=d(" 工具描述 ")),s(g,{"popper-class":"c-flowtip",class:"item",effect:"dark",content:"给大模型看的描述信息，需要认真填写，方便大模型准确使用",placement:"top"},{default:o(()=>e[62]||(e[62]=[l("span",{style:{position:"relative",top:"1px"},class:"iconfont icon-bangzhu"},null,-1)])),_:1})]),default:o(()=>[s(x,{modelValue:r.value.caption,"onUpdate:modelValue":e[20]||(e[20]=t=>r.value.caption=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e[93]||(e[93]=l("br",null,null,-1)),s(C,{label:"",style:{width:"calc(50% - 16px)"},rules:[{required:!0,message:"请输入工具路径",trigger:"blur"}],prop:"api_url"},{label:o(()=>[e[65]||(e[65]=d(" 工具路径URL ")),s(g,{"popper-class":"c-flowtip",class:"item",effect:"dark",content:"工具路径就是你需要调用的外部 API的 URL",placement:"top"},{default:o(()=>e[64]||(e[64]=[l("span",{style:{position:"relative",top:"1px"},class:"iconfont icon-bangzhu"},null,-1)])),_:1})]),default:o(()=>[s(x,{modelValue:r.value.api_url,"onUpdate:modelValue":e[21]||(e[21]=t=>r.value.api_url=t),placeholder:" ",class:"input-with-select"},null,8,["modelValue"])]),_:1}),s(C,{label:"",style:{width:"calc(25% - 8px)","margin-right":"16px"},rules:[{required:!0,message:"请输入请求方法",trigger:"change"}],prop:"api_method"},{label:o(()=>[e[67]||(e[67]=d(" 请求方法 ")),s(g,{"popper-class":"c-flowtip",class:"item",effect:"dark",content:"按照实际情况根据远程api的要求设置",placement:"top"},{default:o(()=>e[66]||(e[66]=[l("span",{style:{position:"relative",top:"1px"},class:"iconfont icon-bangzhu"},null,-1)])),_:1})]),default:o(()=>[s(F,{modelValue:r.value.api_method,"onUpdate:modelValue":e[22]||(e[22]=t=>r.value.api_method=t),placeholder:" "},{default:o(()=>[s(U,{label:"POST",value:"POST"}),s(U,{label:"GET",value:"GET"})]),_:1},8,["modelValue"])]),_:1}),s(C,{class:"c-switchbox-label",label:"工具状态",style:{width:"calc(25% - 8px)","margin-right":"0"},prop:"is_enable"},{default:o(()=>[l("div",Dl,[e[68]||(e[68]=l("div",{class:"label"},null,-1)),l("div",Nl,[s(R,{modelValue:r.value.is_enable,"onUpdate:modelValue":e[23]||(e[23]=t=>r.value.is_enable=t),"inline-prompt":"","active-text":"启用工具","inactive-text":"禁用工具"},null,8,["modelValue"])])])]),_:1}),l("div",Ol,[s(Z,{width:"32",height:"32",type:"shuru"}),e[69]||(e[69]=d(" 输入参数 "))]),l("div",Al,[l("div",Tl,[l("div",El,[e[71]||(e[71]=d("参数名称 ")),s(g,{"popper-class":"c-flowtip",class:"item",effect:"dark",content:"根据远程api设置",placement:"top"},{default:o(()=>e[70]||(e[70]=[l("span",{style:{position:"relative",top:"0px"},class:"iconfont icon-bangzhu"},null,-1)])),_:1})]),l("div",Il,[e[73]||(e[73]=d("参数描述 ")),s(g,{"popper-class":"c-flowtip",class:"item",effect:"dark",content:"参数描述性信息，方便大模型使用",placement:"top"},{default:o(()=>e[72]||(e[72]=[l("span",{style:{position:"relative",top:"0px"},class:"iconfont icon-bangzhu"},null,-1)])),_:1})]),l("div",Ll,[e[75]||(e[75]=d("参数类型 ")),s(g,{"popper-class":"c-flowtip",class:"item",effect:"dark",content:"根据远程api设置",placement:"top"},{default:o(()=>e[74]||(e[74]=[l("span",{style:{position:"relative",top:"0px"},class:"iconfont icon-bangzhu"},null,-1)])),_:1})]),l("div",Fl,[e[77]||(e[77]=d("传入方法 ")),s(g,{"popper-class":"c-flowtip",class:"item",effect:"dark",content:"根据远程api设置",placement:"top"},{default:o(()=>e[76]||(e[76]=[l("span",{style:{position:"relative",top:"0px"},class:"iconfont icon-bangzhu"},null,-1)])),_:1})]),l("div",Hl,[e[79]||(e[79]=d("是否必须 ")),s(g,{"popper-class":"c-flowtip",class:"item",effect:"dark",content:"根据远程api设置",placement:"top"},{default:o(()=>e[78]||(e[78]=[l("span",{style:{position:"relative",top:"0px"},class:"iconfont icon-bangzhu"},null,-1)])),_:1})]),l("div",Jl,[e[81]||(e[81]=d("默认值 ")),s(g,{"popper-class":"c-flowtip",class:"item",effect:"dark","raw-content":"",content:"在此处可填写API要求输入的参数，这些参数将作为默认值，例如API密钥、APIToken等信息。<br /> 若填写此项，模型将不会看到和填写该参数。",placement:"top"},{default:o(()=>e[80]||(e[80]=[l("span",{style:{position:"relative",top:"0px"},class:"iconfont icon-bangzhu"},null,-1)])),_:1})]),e[82]||(e[82]=l("div",{class:"citem end",style:{width:"120px"}},"操作",-1))]),s(de,{style:{width:"100%"},data:r.value.in_params,"node-key":"id","default-expand-all":"","empty-text":"暂无数据","expand-on-click-node":!1},{default:o(({node:t,data:a})=>[l("div",Ql,[l("div",{class:N(["citem pd0",{"c-errorinp":a.errtip&&!a.name}]),style:B("width: calc(50% - 420px);margin-right:-"+10*(t.level-1)+"px")},[s(x,{onBlur:p=>te(a,t),placeholder:"输入参数名",modelValue:a.name,"onUpdate:modelValue":p=>a.name=p,style:B("width:calc("+("100%  - "+10*(t.level-1))+"px")},null,8,["onBlur","modelValue","onUpdate:modelValue","style"])],6),l("div",{style:B("width: calc(50% - "+(420-10*(t.level-1))+"px);"),class:N(["citem",{"c-errorinp":a.errtip&&!a.caption}])},[s(x,{onBlur:p=>se(a,t,"caption"),onClick:e[24]||(e[24]=V(()=>{},["stop","prevent"])),onMousedown:e[25]||(e[25]=V(()=>{},["stop"])),modelValue:a.caption,"onUpdate:modelValue":p=>a.caption=p,placeholder:"请描述变量的用途"},null,8,["onBlur","modelValue","onUpdate:modelValue"])],6),l("div",Wl,[s(F,{modelValue:a.data_type,"onUpdate:modelValue":p=>a.data_type=p,disabled:a.disabled,placeholder:"选择类型"},{default:o(()=>[(m(!0),w(D,null,J(_(O).getters.keyTypes,(p,Y)=>(m(),H(U,{value:Y,label:p,disabled:oe(t,p)},null,8,["value","label","disabled"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),l("div",Gl,[s(F,{modelValue:a.param_way,"onUpdate:modelValue":p=>a.param_way=p,disabled:t.level>1,placeholder:"传入方法"},{default:o(()=>[s(U,{label:"Body",value:"Body"}),s(U,{label:"Path",value:"Path"}),s(U,{label:"Query",value:"Query"}),s(U,{label:"Header",value:"Header"})]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),l("div",Kl,[s(R,{modelValue:a.is_required,"onUpdate:modelValue":p=>a.is_required=p,"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",Xl,[s(x,{onClick:e[26]||(e[26]=V(()=>{},["stop","prevent"])),onMousedown:e[27]||(e[27]=V(()=>{},["stop"])),modelValue:a.default_value,"onUpdate:modelValue":p=>a.default_value=p,placeholder:"请输入默认值"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",Yl,[pe(l("span",{title:"新增子项",style:{"margin-right":"12px"},onClick:p=>I("in_params",a),class:"iconfont icon-liebiao-zengjia"},null,8,Zl),[[ue,t.level<4&&(a.data_type=="Object"||a.data_type=="Array<Object>")]]),a.disabled?z("",!0):(m(),w("span",{key:0,title:"删除当前项",onClick:p=>ne(t,a,"in_params"),class:"iconfont icon-liebiao-shanchu"},null,8,et))]),a.errtip?(m(),w("div",lt,y(a.errtip),1)):z("",!0)])]),_:1},8,["data"]),l("div",tt,[l("div",{onClick:e[28]||(e[28]=t=>I("in_params")),class:"btns"},e[83]||(e[83]=[l("span",{class:"iconfont icon-xinzengcanshu"},null,-1),d(" 新增参数 ")]))])]),l("div",st,[s(Z,{width:"32",height:"32",type:"shuchu"}),e[84]||(e[84]=d(" 输出参数 "))]),l("div",ot,[l("div",nt,[l("div",at,[e[86]||(e[86]=d("参数名称 ")),s(g,{"popper-class":"c-flowtip",class:"item",effect:"dark",content:"根据远程api设置",placement:"top"},{default:o(()=>e[85]||(e[85]=[l("span",{style:{position:"relative",top:"0px"},class:"iconfont icon-bangzhu"},null,-1)])),_:1})]),l("div",it,[e[88]||(e[88]=d("参数描述 ")),s(g,{"popper-class":"c-flowtip",class:"item",effect:"dark",content:"参数描述性信息，方便大模型使用",placement:"top"},{default:o(()=>e[87]||(e[87]=[l("span",{style:{position:"relative",top:"0px"},class:"iconfont icon-bangzhu"},null,-1)])),_:1})]),l("div",rt,[e[90]||(e[90]=d("参数类型 ")),s(g,{"popper-class":"c-flowtip",class:"item",effect:"dark",content:"根据远程api设置",placement:"top"},{default:o(()=>e[89]||(e[89]=[l("span",{style:{position:"relative",top:"0px"},class:"iconfont icon-bangzhu"},null,-1)])),_:1})]),e[91]||(e[91]=l("div",{class:"citem end",style:{width:"120px"}},"操作",-1))]),s(de,{style:{width:"100%"},data:r.value.out_params,"node-key":"id","default-expand-all":"","empty-text":"暂无数据","expand-on-click-node":!1},{default:o(({node:t,data:a})=>[l("div",dt,[l("div",{class:N(["citem pd0",{"c-errorinp":a.errtip&&!a.name}]),style:B("width: calc(50% - 160px);margin-right:-"+10*(t.level-1)+"px")},[s(x,{onBlur:p=>te(a,t),placeholder:"输入参数名",modelValue:a.name,"onUpdate:modelValue":p=>a.name=p,style:B("width:calc("+("100%  - "+10*(t.level-1))+"px")},null,8,["onBlur","modelValue","onUpdate:modelValue","style"])],6),l("div",{style:B("width: calc(50% - "+(160-10*(t.level-1))+"px);"),class:N(["citem",{"c-errorinp":a.errtip&&!a.caption}])},[s(x,{onBlur:p=>se(a,t,"caption"),onClick:e[29]||(e[29]=V(()=>{},["stop","prevent"])),onMousedown:e[30]||(e[30]=V(()=>{},["stop"])),modelValue:a.caption,"onUpdate:modelValue":p=>a.caption=p,placeholder:"请描述变量的用途"},null,8,["onBlur","modelValue","onUpdate:modelValue"])],6),l("div",pt,[s(F,{modelValue:a.data_type,"onUpdate:modelValue":p=>a.data_type=p,disabled:a.disabled,placeholder:"选择类型"},{default:o(()=>[(m(!0),w(D,null,J(_(O).getters.keyTypes,(p,Y)=>(m(),H(U,{value:Y,label:p,disabled:oe(t,p)},null,8,["value","label","disabled"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),l("div",ut,[pe(l("span",{title:"新增子项",style:{"margin-right":"12px"},onClick:p=>I("out_params",a),class:"iconfont icon-liebiao-zengjia"},null,8,ct),[[ue,t.level<4&&(a.data_type=="Object"||a.data_type=="Array<Object>")]]),a.disabled?z("",!0):(m(),w("span",{key:0,title:"删除当前项",onClick:p=>ne(t,a,"out_params"),class:"iconfont icon-liebiao-shanchu"},null,8,mt))]),a.errtip?(m(),w("div",vt,y(a.errtip),1)):z("",!0)])]),_:1},8,["data"]),l("div",ft,[l("div",{onClick:e[31]||(e[31]=t=>I("out_params")),class:"btns"},e[92]||(e[92]=[l("span",{class:"iconfont icon-xinzengcanshu"},null,-1),d(" 新增参数 ")]))])])]),_:1},8,["model"])]),_:1})]),l("div",_t,[s(i,{type:"primary",onClick:e[33]||(e[33]=t=>_e(E.value))},{default:o(()=>e[94]||(e[94]=[d(" 保存 ")])),_:1}),s(i,{plain:"",onClick:e[34]||(e[34]=t=>P.value=!1)},{default:o(()=>e[95]||(e[95]=[d(" 取消 ")])),_:1})])]),_:1},8,["modelValue","title"])],64)}}},kt=Me(bt,[["__scopeId","data-v-def873dd"]]);export{kt as default};
