import{aR as Ae,l as te,r as u,z as m,B as a,R as l,K as We,J as o,al as _,u as c,L as v,Q as le,aS as Ye,n as Je,ar as Fe,A as i,O as r,E as Ke,D as Qe,P as x,W as O,I as V,a6 as be}from"./vue-CdYMfVVj.js";import{_ as Ge,c as we,E as Xe,H as Ze,u as et,ap as tt,R as lt,aq as ot,i as at,ar as st,as as nt,at as it,l as rt,au as dt}from"./index-B6WbZO8q.js";import{a as ut,r as pt}from"./result-CcYZ99eM.js";import{a as ye}from"./comp-ClzPtuSi.js";import{C as ct}from"./list-BbxMWpnt.js";import mt from"./logdetail-BpmCFm-r.js";import{C as _t}from"./changeTree-DT6Je88Y.js";import"./element-GwJlJi_X.js";import"./editor-Dhn2M38E.js";import"./editor.api-_A1huWdg.js";import"./list.vue_vue_type_style_index_1_lang-B8pmpZgU.js";const ft={class:"pagelistbox"},vt={class:"c-bodybox"},gt={class:"catebox leftbox"},bt={class:"topbtns"},wt={class:"treebox contain"},yt={class:"el-tree el-tree--highlight-current",role:"tree",style:{width:"100%"}},ht={class:"el-tree-node__content",style:{"padding-left":"0px"}},kt=["title"],xt={class:"item"},Ct={class:"ellipsis"},Vt={class:"btns"},Tt=["onClick"],$t=["onClick"],St=["onClick"],zt={class:"botbtns"},qt={class:"c-tablebox tableboxContain c-tooltip rightbox"},Ut={style:{"margin-left":"24px","margin-right":"24px"},class:"c-top-searchbox c-js-item"},Lt={class:"rbox"},Rt={class:"topbtns tl c-js-item"},Dt={class:"bodybox c-js-body"},Et={class:"contain"},Mt={class:"ellipsis2"},Ht={style:{margin:"0 -20px"}},jt=["innerHTML"],It={class:"ellipsis2"},Nt={style:{margin:"0 -20px"}},Pt=["innerHTML"],Bt=["onClick"],Ot={class:"ellipsis2"},At={style:{margin:"0 -20px"}},Wt=["innerHTML"],Yt={class:"ellipsis"},Jt={style:{margin:"0 -20px"}},Ft=["innerHTML"],Kt={key:0,class:"c-success-btn"},Qt={key:1,class:"c-plain-btn"},Gt={key:2,class:"c-danger-btn"},Xt={key:0,class:"c-success-btn"},Zt={key:1,class:"c-primary-btn"},el={key:2,class:"c-plain-btn"},tl=["onClick"],ll={key:0,class:"c-success-btn"},ol={key:1,class:"c-plain-btn"},al={key:0,class:"c-success-btn"},sl={key:1,class:"c-plain-btn"},nl=["onClick"],il=["onClick"],rl=["onClick"],dl=["onClick"],ul={class:"c-emptybox"},pl={key:0,class:"c-pagination"},cl={class:"dialog-footer"},ml={key:0},_l={key:1,class:"placeholder"},fl={class:"dialog-footer"},vl={__name:"list",props:{TEST_TYPE:{type:[String,Number],default:""}},setup(he,{expose:ke}){const xe=he,S=Ae(),Ce=Ye(),Ve=et(),C=xe.TEST_TYPE||(S.path==="/unittest"?"S":"W");let n=te({page:1,pagesize:30,question:"",answer:"",cate_id:void 0,case_state:0,case_result:0});const D=u(0),Te=()=>{n.case_result=0,n.question="",n.answer="",n.cate_id=void 0,n.case_state=0};we(n,S.query,"cate_id");let oe=u([]);const k=s=>{if(s=="init"&&(n.page=1),tt(n,C).then(e=>{let p=e.rows||[];oe.value=p,D.value=e.total_records}),s!="noquery"&&S.path=="/test"){let e={...S.query,...n};Ce.replace({path:S.path,query:e})}};k(),u(null);const A=u([]),ae=u(null),W=async s=>{n.cate_id=s.id,k("init")},Y=()=>{lt({},C).then(async s=>{A.value=s||[],await Je(),ae.value.setCurrentKey(parseInt(n.category_id))}).catch(s=>{})};Y();const z=u(!1),f=te({name:"",color:"",id:0});function se(){return("#"+Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")).toUpperCase()}const J=u(),F=async(s,e)=>{f.pid=s.pid||null,f.id=s.id||void 0,f.cate_name=s.name||"",f.color=s.color||se(),e=="child"&&(f.pid=s.id,f.cate_name="",f.id=void 0,f.color=se()),z.value=!0,setTimeout(()=>{J.value.focus()},400)},$e=()=>{if(!f.color)return _this.$message("请选择分类颜色","error"),!1;if(!f.cate_name)return J.value.focus(),!1;it(f,C).then(s=>{_this.$message("操作成功"),z.value=!1,Y()}).catch(s=>{})},Se=s=>{_this.$confirm("确定要删除所选数据?").then(e=>{st({id:s.id},C).then(p=>{_this.$message("删除成功"),Y()})})},$=u(!1),T=u({}),ne=s=>{T.value=s,$.value=!0},q=u(!1),d=te({id:"",id1:"",curTestType:2,llm_id:"",workflow_id:"",prompt_id:"",prompt_name:"",is_forced:!1}),g=u({});u([]);const K=s=>{let e="testoptformparamSave";s?localStorage.setItem(e,JSON.stringify(s)):localStorage.getItem(e)&&(g.value=JSON.parse(localStorage.getItem(e)))};K();const ie=u(),ze=async s=>{s&&await s.validate((e,p)=>{if(e){if(d.curTestType!=1){if(!d.workflow_id)return _this.$message("请选择流程","error"),!1}if(!d.llm_id)return _this.$message("请选择评测大模型","error"),!1;if(!d.prompt_id)return _this.$message("请选择提示词","error"),!1;g.value=rt.cloneDeep(d),K(g.value),q.value=!1,H.value.length>0&&Q(H.value)}})},re=async s=>{we(d,g.value),H.value=s||[],q.value=!0},E=u([]),U=u(!1),qe=()=>{$.value?E.value=[{id:T.value.prompt_id}]:E.value=[{id:d.prompt_id}],U.value=!0},Ue=s=>{U.value=!1,E.value=[],$.value?(T.value.prompt_id=s[0].id,T.value.prompt_name=s[0].name):(d.prompt_id=s[0].id,d.prompt_name=s[0].name)},Le=s=>{d.id="",d.is_forced="",d.id1="",d.llm_id="",d.workflow_id="",d.curTestType=2,d.prompt_id="",d.prompt_name="",g.value={},K(g.value)},M=u([]),Re=s=>{M.value=s},H=u([]),Q=async s=>{if(!s){if(M.value.length==0)return _this.$message("请选择测试用例","error"),!1;s=[],M.value.forEach(p=>{s.push(p.id)})}if(!g.value.curTestType)return _this.$message("请先配置参数，再执行测试","error"),re(s),!1;H.value=[];let e={ids:s};g.value.curTestType==1?e.app_id=g.value.id:e.workflow_id=g.value.workflow_id,e.evaluation_llm_id=g.value.llm_id,e.evaluation_prompt_id=g.value.prompt_id,e.evaluation_prompt_name=g.value.prompt_name,e.is_forced=g.value.is_forced,ot(e,C).then(p=>{p&&(_this.$message("测试任务提交成功"),k())}).catch(p=>{})},De=s=>{_this.$confirm("确定要删除所选数据?").then(e=>{nt({id:s.id},C).then(p=>{_this.$message("删除成功"),k()})})},L=u(null),Ee=()=>M.value,Me=s=>{var e;s?s.forEach(p=>{var I;(I=L.value)==null||I.toggleRowSelection(p,void 0)}):(e=L.value)==null||e.clearSelection()},de=u([]);Xe({page:1,pagesize:1e4},C).then(s=>{de.value=s||[]});const ue=u([]);Ze({page:1,pagesize:1e4},C).then(s=>{let e=s.rows||[];ue.value=e});const pe=u({}),G=u(!1),He=s=>{_this.$message("操作成功"),k(),$.value=!1},ce=(s,e)=>{if(!s)return!1;pe.value={id:s},G.value=!0},j=u(!1),je=s=>{dt({source_cate_id:s.curcateData.id,target_cate_id:s.curcateData1.id,tag:"W"}).then(e=>{_this.$message("操作成功"),j.value=!1,k()})},X=u(!1),Z=u(0);return ke({getCheckList:Ee,setCehckList:Me}),(s,e)=>{const p=_("el-button"),I=_("el-tree"),R=_("el-scrollbar"),N=_("el-input"),y=_("el-form-item"),h=_("el-option"),P=_("el-select"),ee=_("el-form"),b=_("el-table-column"),B=_("el-popover"),Ie=_("el-table"),Ne=_("el-pagination"),Pe=_("el-color-picker"),me=_("el-dialog"),_e=_("el-tooltip"),fe=_("el-radio"),Be=_("el-radio-group"),ve=_("el-drawer"),Oe=Fe("initTableHeight");return i(),m(le,null,[a("div",ft,[e[52]||(e[52]=a("div",{class:"c-titlebox"},[a("span",{class:"title"},"流程测试")],-1)),a("div",vt,[a("div",gt,[a("div",bt,[e[34]||(e[34]=a("span",{class:"title"},"用例库",-1)),l(p,{onClick:e[0]||(e[0]=t=>W({id:void 0})),class:"on noradius",plain:""},{default:o(()=>e[33]||(e[33]=[a("span",{class:"iconfont icon-anniu-zhankai"},null,-1),r(" 查看全部 ")])),_:1})]),a("div",wt,[l(R,null,{default:o(()=>[a("div",yt,[a("div",{class:Ke(["el-tree-node",{"is-current":c(n).cate_id==0}])},[a("div",ht,[a("div",{onClick:e[1]||(e[1]=t=>W({id:0})),style:{"padding-left":"35px"},class:"custom-tree-node"},e[35]||(e[35]=[a("div",{class:"item"},[a("span",{class:"c-color radius",style:"background-color:#ff0000"}),r("未分类 ")],-1)]))])],2)]),l(I,{ref_key:"treeSelect",ref:ae,style:{width:"100%"},data:A.value,"node-key":"id","empty-text":"暂无测试类目信息","highlight-current":"","current-node-key":c(n).cate_id?parseInt(c(n).cate_id):void 0,"default-expand-all":"",onNodeClick:W,"expand-on-click-node":!1},{default:o(({node:t,data:w})=>[a("div",{title:w.name,class:"custom-tree-node"},[a("div",xt,[a("span",{class:"c-color radius",style:Qe("background-color:"+w.color)},null,4),a("p",Ct,x(w.name),1)]),a("div",Vt,[a("span",{title:"添加子类目",onClick:O(ge=>F(w,"child"),["stop"]),class:"iconfont icon-shuzhuang-tianjia"},null,8,Tt),a("span",{title:"修改",onClick:O(ge=>F(w),["stop"]),class:"iconfont icon-xiugai"},null,8,$t),a("span",{title:"删除类目",onClick:O(ge=>Se(w),["stop"]),class:"iconfont icon-shuzhuang-shanchu"},null,8,St)])],8,kt)]),_:1},8,["data","current-node-key"])]),_:1})]),a("div",zt,[l(p,{style:{width:"100%"},plain:"",class:"on noradius",onClick:e[2]||(e[2]=t=>F({name:"",color:"",id:0}))},{default:o(()=>e[36]||(e[36]=[a("span",{class:"iconfont icon-liebiao-xinzeng"},null,-1),r(" 新增用例库")])),_:1})])]),We((i(),m("div",qt,[a("div",Ut,[l(ee,{model:c(n),ref:"searchFormRef",inline:"",class:"demo-form-inline"},{default:o(()=>[l(y,{label:"问题",prop:"question"},{default:o(()=>[l(N,{clearable:"",modelValue:c(n).question,"onUpdate:modelValue":e[3]||(e[3]=t=>c(n).question=t),type:"text"},null,8,["modelValue"])]),_:1}),l(y,{label:"结果",prop:"case_result"},{default:o(()=>[l(P,{style:{width:"160px"},clearable:"",modelValue:c(n).case_result,"onUpdate:modelValue":e[4]||(e[4]=t=>c(n).case_result=t),placeholder:""},{default:o(()=>[l(h,{label:"请选择",value:0}),l(h,{label:"未测试",value:1001}),l(h,{label:"成功",value:2001}),l(h,{label:"失败",value:3001})]),_:1},8,["modelValue"])]),_:1}),l(y,{label:"状态",prop:"case_state"},{default:o(()=>[l(P,{style:{width:"160px"},clearable:"",modelValue:c(n).case_state,"onUpdate:modelValue":e[5]||(e[5]=t=>c(n).case_state=t),placeholder:""},{default:o(()=>[l(h,{label:"请选择",value:0}),l(h,{label:"准备就绪",value:1001}),l(h,{label:"测试中",value:2001}),l(h,{label:"测试完成",value:3001})]),_:1},8,["modelValue"])]),_:1}),l(y,{label:"回答",prop:"answer"},{default:o(()=>[l(N,{clearable:"",modelValue:c(n).answer,"onUpdate:modelValue":e[6]||(e[6]=t=>c(n).answer=t),type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),a("div",Lt,[l(p,{onClick:e[7]||(e[7]=t=>k("init")),type:"primary"},{default:o(()=>e[37]||(e[37]=[r("查询")])),_:1}),l(p,{onClick:e[8]||(e[8]=t=>Te()),plain:""},{default:o(()=>e[38]||(e[38]=[r("重置")])),_:1})])]),a("div",Rt,[l(p,{onClick:e[9]||(e[9]=t=>ne({id:null,cate_id:null,message_history_id:null,workflow_log_id:null,question:"",message_history:"",right_answer:"",note:""})),type:"primary"},{default:o(()=>e[39]||(e[39]=[r("新增")])),_:1}),l(p,{onClick:e[10]||(e[10]=t=>j.value=!0),plain:""},{default:o(()=>e[40]||(e[40]=[r("调整类目")])),_:1}),l(p,{onClick:e[11]||(e[11]=t=>Q()),type:"primary",plain:""},{default:o(()=>e[41]||(e[41]=[r("批量测试")])),_:1}),l(p,{onClick:e[13]||(e[13]=t=>re()),style:{background:"rgba(22,93,255,0.1)",color:"var(--el-color-primary)"},plain:""},{default:o(()=>[e[42]||(e[42]=r("参数配置 ")),g.value.curTestType?(i(),m("span",{key:0,style:{color:"var(--el-text-color-regular)"},title:"删除已配置参数",onClick:e[12]||(e[12]=O(t=>Le(!0),["stop"])),class:"iconfont icon-guanbi"})):v("",!0)]),_:1})]),a("div",Dt,[a("div",Et,[l(Ie,{"tooltip-effect":"light",border:"",data:c(oe),style:{width:"100%"},"max-height":c(Ve).getters.innerHeight-293,onSelectionChange:Re,ref_key:"tableRef",ref:L},{empty:o(t=>[a("div",ul,[l(at,{type:"empzwssjg",width:"100",height:"100"}),e[51]||(e[51]=r("暂无数据~~ "))])]),default:o(()=>[l(b,{fixed:"left",type:"selection",width:"40"}),l(b,{prop:"id",width:"70",label:"id"}),l(b,{"min-width":"160",label:"问题"},{default:o(t=>[t.row.question?(i(),V(B,{key:0,placement:"top-start",width:500,trigger:"hover"},{reference:o(()=>[a("div",Mt,[e[43]||(e[43]=a("span",{class:"c-primary-btn c-mini"},"问",-1)),r(" "+x(t.row.question),1)])]),default:o(()=>[a("div",Ht,[l(R,{"max-height":"400"},{default:o(()=>[a("div",{innerHTML:t.row.question.replace(/\n/g,"<br>"),style:{margin:"0 20px"}},null,8,jt)]),_:2},1024)])]),_:2},1024)):v("",!0)]),_:1}),l(b,{"min-width":"160",label:"参考答案"},{default:o(t=>[t.row.right_answer?(i(),V(B,{key:0,placement:"top-start",width:500,trigger:"hover"},{reference:o(()=>[a("div",It,[e[44]||(e[44]=a("span",{class:"c-success-btn c-mini"},"参",-1)),r(" "+x(t.row.right_answer),1)])]),default:o(()=>[a("div",Nt,[l(R,{"max-height":"400"},{default:o(()=>[a("div",{innerHTML:t.row.right_answer.replace(/\n/g,"<br>"),style:{margin:"0 20px"}},null,8,Pt)]),_:2},1024)])]),_:2},1024)):v("",!0)]),_:1}),l(b,{"min-width":"160",label:"最终回答"},{default:o(t=>[t.row.test_result_answer?(i(),m("div",{key:0,onClick:w=>ce(t.row.last_test_workflow_log_id,1)},[t.row.test_result_answer?(i(),V(B,{key:0,placement:"top-start",width:500,trigger:"hover"},{reference:o(()=>[a("div",Ot,[e[45]||(e[45]=a("span",{class:"c-warn-btn c-mini"},"终",-1)),r(" "+x(t.row.test_result_answer),1)])]),default:o(()=>[a("div",At,[l(R,{"max-height":"400"},{default:o(()=>[a("div",{innerHTML:t.row.test_result_answer.replace(/\n/g,"<br>"),style:{margin:"0 20px"}},null,8,Wt)]),_:2},1024)])]),_:2},1024)):v("",!0)],8,Bt)):v("",!0)]),_:1}),l(b,{"min-width":"160",label:"备注"},{default:o(t=>[t.row.note?(i(),V(B,{key:0,placement:"top-start",width:500,trigger:"hover"},{reference:o(()=>[a("div",Yt,x(t.row.note),1)]),default:o(()=>[a("div",Jt,[l(R,{"max-height":"400"},{default:o(()=>[a("div",{innerHTML:t.row.note.replace(/\n/g,"<br>"),style:{margin:"0 20px"}},null,8,Ft)]),_:2},1024)])]),_:2},1024)):v("",!0)]),_:1}),l(b,{width:"100",label:"测试结果"},{default:o(t=>[t.row.test_result==2001?(i(),m("span",Kt,"成功")):v("",!0),t.row.test_result==1001?(i(),m("span",Qt,"未测试")):v("",!0),t.row.test_result==3001?(i(),m("span",Gt,"失败")):v("",!0)]),_:1}),l(b,{width:"100",label:"测试状态"},{default:o(t=>[t.row.test_state==3001?(i(),m("span",Xt,"测试完成")):v("",!0),t.row.test_state==2001?(i(),m("span",Zt,"测试中")):v("",!0),t.row.test_state==1001?(i(),m("span",el,"准备就绪")):v("",!0)]),_:1}),l(b,{width:"160",label:"运行记录"},{default:o(t=>[t.row.test_result!=1001?(i(),m("span",{key:0,onClick:w=>{Z.value=t.row.id,X.value=!0},class:"c-pointer c-flex"},[e[46]||(e[46]=a("span",{style:{color:"var(--el-color-primary)"},class:"iconfont icon-yunhangjilu"},null,-1)),r("运行记录("+x(t.row.test_count)+") ",1)],8,tl)):v("",!0)]),_:1}),l(b,{width:"100",align:"center",label:"是否审核"},{default:o(t=>[t.row.is_marked?(i(),m("span",ll,"已审核")):(i(),m("span",ol,"未审核"))]),_:1}),l(b,{width:"100",align:"center",label:"是否更正"},{default:o(t=>[t.row.is_modified?(i(),m("span",al,"已更正")):(i(),m("span",sl,"未更正"))]),_:1}),l(b,{width:"160",align:"center",label:"创建时间"},{default:o(t=>[r(x(c(ye)(t.row.created_at)),1)]),_:1}),l(b,{width:"160",align:"center",label:"最后测试时间"},{default:o(t=>[r(x(c(ye)(t.row.last_test_time)),1)]),_:1}),l(b,{fixed:"right",width:"240",align:"right",label:"操作"},{default:o(t=>[a("div",{onClick:w=>ne(t.row),class:"c-table-ibtn"},e[47]||(e[47]=[a("span",{class:"iconfont icon-xiugai"},null,-1),r(" 修改 ")]),8,nl),a("div",{onClick:w=>Q([t.row.id]),class:"c-table-ibtn"},e[48]||(e[48]=[a("span",{class:"iconfont icon-liebiao-ceshi"},null,-1),r(" 测试 ")]),8,il),t.row.workflow_log_id?(i(),m("div",{key:0,onClick:w=>ce(t.row.workflow_log_id,1),class:"c-table-ibtn"},e[49]||(e[49]=[a("span",{class:"iconfont icon-liebiao-xiangqing"},null,-1),r(" 用例详情 ")]),8,rl)):v("",!0),a("div",{onClick:w=>De(t.row),class:"c-table-ibtn c-btn-del"},e[50]||(e[50]=[a("span",{class:"iconfont icon-shuzhuang-shanchu"},null,-1),r(" 删除 ")]),8,dl)]),_:1})]),_:1},8,["data","max-height"]),D.value>0?(i(),m("div",pl,[l(Ne,{"hide-on-single-page":!1,background:"","page-size":c(n).pagesize,"current-page":c(n).page,onSizeChange:e[14]||(e[14]=t=>{c(n).pagesize=t,c(n).page=Math.min(Math.ceil(D.value/c(n).pagesize),c(n).page),k()}),onCurrentChange:e[15]||(e[15]=t=>{c(n).page=t,L.value&&L.value.scrollTo(0,0),k()}),"page-sizes":[30,50,100,900],layout:"total,sizes,jumper,prev, pager, next",total:D.value},null,8,["page-size","current-page","total"])])):v("",!0)])])])),[[Oe]])])]),l(me,{"align-center":"",modelValue:z.value,"onUpdate:modelValue":e[20]||(e[20]=t=>z.value=t),title:f.id?"修改用例库":"新增用例库",width:"500"},{footer:o(()=>[a("div",cl,[l(p,{plain:"",onClick:e[18]||(e[18]=t=>z.value=!1)},{default:o(()=>e[53]||(e[53]=[r(" 取消 ")])),_:1}),l(p,{type:"primary",onClick:e[19]||(e[19]=t=>$e())},{default:o(()=>e[54]||(e[54]=[r(" 确定 ")])),_:1})])]),default:o(()=>[l(ee,{ref:"formRef",style:{"text-align":"left"},model:f,"label-width":"auto","label-position":"top",class:"demo-dynamic"},{default:o(()=>[l(y,{prop:"cate_name",label:"分类名称",rules:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},{default:o(()=>[l(N,{modelValue:f.cate_name,"onUpdate:modelValue":e[16]||(e[16]=t=>f.cate_name=t),ref_key:"inputRef",ref:J,autofocus:"",style:{width:"calc(100% - 42px)","margin-right":"10px"},placeholder:"请输入分类名称"},null,8,["modelValue"]),l(Pe,{modelValue:f.color,"onUpdate:modelValue":e[17]||(e[17]=t=>f.color=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(me,{"align-center":"",modelValue:q.value,"onUpdate:modelValue":e[27]||(e[27]=t=>q.value=t),title:"配置参数",width:"700"},{footer:o(()=>[a("div",fl,[l(p,{plain:"",onClick:e[25]||(e[25]=t=>q.value=!1)},{default:o(()=>e[62]||(e[62]=[r(" 取消 ")])),_:1}),l(p,{type:"primary",onClick:e[26]||(e[26]=t=>ze(ie.value))},{default:o(()=>e[63]||(e[63]=[r(" 确定 ")])),_:1})])]),default:o(()=>[l(ee,{ref_key:"optform",ref:ie,model:d,"label-width":"auto",inline:"","label-position":"top",class:"demo-dynamic tl"},{default:o(()=>[l(y,{style:{width:"calc(50% - 8px)","margin-right":"16px"},prop:"type",label:"测试分类"},{default:o(()=>[l(N,{disabled:"",value:"流程测试",autocomplete:"off"})]),_:1}),l(y,{style:{width:"calc(50% - 8px)","margin-right":"0"},prop:"type",label:""},{label:o(()=>[e[56]||(e[56]=r(" 使用的流程 ")),l(_e,{"popper-class":"c-flowtip",class:"item",effect:"dark",content:"默认流程： 该测试按照 原流程执行。指定流程：按照人工指定的流程执行，注意输入参数要和原流程一致。",placement:"top"},{default:o(()=>e[55]||(e[55]=[a("span",{style:{position:"relative",top:"1px"},class:"iconfont icon-bangzhu"},null,-1)])),_:1})]),default:o(()=>[l(Be,{modelValue:d.is_forced,"onUpdate:modelValue":e[21]||(e[21]=t=>d.is_forced=t)},{default:o(()=>[l(fe,{value:!0},{default:o(()=>e[57]||(e[57]=[r("按指定的流程执行")])),_:1}),l(fe,{value:!1},{default:o(()=>e[58]||(e[58]=[r("按默认流程执行")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(y,{style:{width:"calc(50% - 8px)","margin-right":"16px"},prop:"workflow_id",label:"流程选择",rules:[{required:!0,message:"请选择流程",trigger:"change"}]},{default:o(()=>[l(P,{modelValue:d.workflow_id,"onUpdate:modelValue":e[22]||(e[22]=t=>d.workflow_id=t),class:"val",filterable:"",placeholder:"请选择流程"},{default:o(()=>[(i(!0),m(le,null,be(ue.value,t=>(i(),V(h,{value:parseInt(t.id,10),label:t.name},null,8,["value","label"]))),256))]),_:1},8,["modelValue"])]),_:1}),l(y,{style:{width:"calc(50% - 8px)","margin-right":"0px"},prop:"llm_id",label:"",rules:[{required:!0,message:"请选大模型",trigger:"change"}]},{label:o(()=>[e[60]||(e[60]=r(" 评测大模型 ")),l(_e,{"popper-class":"c-flowtip",class:"item",effect:"dark",content:"用来对输出结果进行打分的大模型，按照提示词对输出和标准答案进行对比打分。",placement:"top"},{default:o(()=>e[59]||(e[59]=[a("span",{style:{position:"relative",top:"1px"},class:"iconfont icon-bangzhu"},null,-1)])),_:1})]),default:o(()=>[l(P,{modelValue:d.llm_id,"onUpdate:modelValue":e[23]||(e[23]=t=>d.llm_id=t),class:"val",filterable:"",placeholder:"请选择大模型"},{default:o(()=>[(i(!0),m(le,null,be(de.value,t=>(i(),V(h,{value:parseInt(t.id,10),label:t.name},null,8,["value","label"]))),256))]),_:1},8,["modelValue"])]),_:1}),l(y,{prop:"prompt_id",style:{width:"100%","margin-right":"0"},rules:[{required:!0,message:"请选提示词"}],label:"提示词"},{default:o(()=>[a("div",{onClick:e[24]||(e[24]=t=>qe()),class:"c-switchbox pointer"},[d.prompt_name?(i(),m("span",ml,x(d.prompt_name),1)):(i(),m("span",_l,"请选择提示词")),e[61]||(e[61]=a("span",{style:{position:"absolute",top:"-36px",right:"0",color:"var(--el-color-primary)"},class:"c-pointer"},"选择",-1))])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(ve,{modelValue:U.value,"onUpdate:modelValue":e[28]||(e[28]=t=>U.value=t),size:"90%",title:"",direction:"rtl"},{default:o(()=>[U.value?(i(),V(ct,{key:0,onSubfn:Ue,isCheck:!0,checkList:E.value},null,8,["checkList"])):v("",!0)]),_:1},8,["modelValue"]),l(ut,{modelValue:$.value,"onUpdate:modelValue":e[29]||(e[29]=t=>$.value=t),TEST_TYPE:"W",item:T.value,curResult:T.value,title:T.value.id?"修改流程测试":"添加流程测试",onSubfn:He},null,8,["modelValue","item","curResult","title"]),l(pt,{modelValue:G.value,"onUpdate:modelValue":e[30]||(e[30]=t=>G.value=t),data:pe.value},null,8,["modelValue","data"]),l(_t,{dataSource:A.value,modelValue:j.value,"onUpdate:modelValue":e[31]||(e[31]=t=>j.value=t),onSubfn:je},null,8,["dataSource","modelValue"]),l(ve,{modelValue:X.value,"onUpdate:modelValue":e[32]||(e[32]=t=>X.value=t),title:"运行记录",direction:"rtl","close-on-click-modal":!0,size:"90%"},{default:o(()=>[Z.value?(i(),V(mt,{key:0,id:Z.value},null,8,["id"])):v("",!0)]),_:1},8,["modelValue"])],64)}}},Sl=Ge(vl,[["__scopeId","data-v-0bedeee5"]]);export{Sl as default};
