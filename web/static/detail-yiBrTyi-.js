import{_ as B,c as N,u as S,aU as U,i as j}from"./index-B6WbZO8q.js";import{g as D,a as w}from"./comp-ClzPtuSi.js";import{r as x,l as I,aR as T,z as h,B as n,u as p,O as s,R as o,J as l,al as r,L as M,aS as P,A as z,P as c}from"./vue-CdYMfVVj.js";import"./element-GwJlJi_X.js";import"./editor-Dhn2M38E.js";const A={class:"page-wbsj"},E={class:"c-titlebox"},F={class:"c-top-searchbox"},H={class:"rbox"},J={class:"containbox c-tablebox"},L=["onClick"],O={class:"c-emptybox"},G={key:0,class:"c-pagination"},K={__name:"detail",setup(Q){const i=T(),V=P(),k=S(),m=x(0),y=x([]),a=I({page:1,pagesize:30,id:i.query.id,relation_index:void 0,code:"",title:""}),C=()=>{a.relation_index=void 0,a.code="",a.title=""};i.query.page&&(a.page=parseInt(i.query.page)||1,a.pagesize=parseInt(i.query.pagesize)||30),N(a,i.query);const _=f=>{if(a.relation_index||(a.relation_index=void 0),U(a).then(e=>{let u=e.rows||[];y.value=u,m.value=e.total_records}),f!="noquery"){let e={...i.query,...a};V.replace({path:i.path,query:e})}};_();const g=x(null);return(f,e)=>{const u=r("el-input"),b=r("el-form-item"),q=r("el-form"),v=r("el-button"),d=r("el-table-column"),R=r("el-table"),$=r("el-pagination");return z(),h("div",A,[n("div",E,[n("span",{onClick:e[0]||(e[0]=t=>p(D)(null,f.$router,p(i).query.fpath||"/dataset/excel")),class:"title"},e[8]||(e[8]=[n("span",{class:"c-pointer c-flex-center",style:{"font-size":"14px"}},[n("span",{class:"iconfont icon-fuwenben-chexiao"}),s("返回列表")],-1)]))]),n("div",F,[o(q,{model:a,ref:"searchFormRef",inline:"",class:"demo-form-inline"},{default:l(()=>[o(b,{label:"索引",prop:"relation_index"},{default:l(()=>[o(u,{clearable:"",modelValue:a.relation_index,"onUpdate:modelValue":e[1]||(e[1]=t=>a.relation_index=t),type:"text"},null,8,["modelValue"])]),_:1}),o(b,{label:"编码",prop:"code"},{default:l(()=>[o(u,{clearable:"",modelValue:a.code,"onUpdate:modelValue":e[2]||(e[2]=t=>a.code=t),type:"text"},null,8,["modelValue"])]),_:1}),o(b,{label:"名称",prop:"title"},{default:l(()=>[o(u,{clearable:"",modelValue:a.title,"onUpdate:modelValue":e[3]||(e[3]=t=>a.title=t),type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),n("div",H,[o(v,{onClick:e[4]||(e[4]=t=>_("init")),type:"primary"},{default:l(()=>e[9]||(e[9]=[s("查询")])),_:1}),o(v,{onClick:e[5]||(e[5]=t=>C()),plain:""},{default:l(()=>e[10]||(e[10]=[s("重置")])),_:1})])]),n("div",J,[o(R,{ref_key:"tableRef",ref:g,data:y.value,"max-height":p(k).getters.innerHeight-198,style:{width:"100%"}},{empty:l(t=>[n("div",O,[o(j,{type:"empzwssjg",width:"100",height:"100"}),e[12]||(e[12]=s("暂无数据~~"))])]),default:l(()=>[o(d,{width:"200",label:"索引"},{default:l(t=>[s(c(t.row.relation_index),1)]),_:1}),o(d,{width:"200",label:"编码"},{default:l(t=>[s(c(t.row.code),1)]),_:1}),o(d,{label:"名称"},{default:l(t=>[s(c(t.row.title),1)]),_:1}),o(d,{width:"200",label:"日期"},{default:l(t=>[s(c(p(w)(t.row.created_at)),1)]),_:1}),o(d,{width:"200",label:"更新时间"},{default:l(t=>[s(c(p(w)(t.row.updated_at)),1)]),_:1}),o(d,{width:"100",align:"center",label:"操作"},{default:l(t=>[n("div",{onClick:W=>f.$router.push("/chat/detail?rid="+p(i).query.id+"&type=excel_document&did="+t.row.code),class:"c-table-ibtn"},e[11]||(e[11]=[n("span",{class:"iconfont icon-liebiao-chakan"},null,-1),s(" 查看 ")]),8,L)]),_:1})]),_:1},8,["data","max-height"]),m.value>0?(z(),h("div",G,[o($,{"hide-on-single-page":!1,background:"","page-size":a.pagesize,"current-page":a.page,onSizeChange:e[6]||(e[6]=t=>{a.pagesize=t,a.page=Math.min(Math.ceil(m.value/a.pagesize),a.page),_()}),onCurrentChange:e[7]||(e[7]=t=>{a.page=t,g.value&&g.value.scrollTo(0,0),_()}),"page-sizes":[30,50,100,900],layout:"total,sizes,jumper,prev, pager, next",total:m.value},null,8,["page-size","current-page","total"])])):M("",!0)])])}}},ae=B(K,[["__scopeId","data-v-ab78d671"]]);export{ae as default};
