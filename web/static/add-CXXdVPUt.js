import{r as p,aR as A,z as x,B as t,O as d,u as i,P as f,R as o,J as a,al as n,aS as N,A as b,K as R,Q as U,a6 as M,I as D,S as F}from"./vue-CdYMfVVj.js";import{_ as I,u as J,i as O}from"./index-B6WbZO8q.js";import{u as X}from"./element-GwJlJi_X.js";import{g as K}from"./comp-ClzPtuSi.js";import"./editor-Dhn2M38E.js";const P={class:"page-wbsj"},Q={class:"c-titlebox"},T={class:"title"},G={class:"containbox c-bodybox",style:{display:"block"}},H={class:"mg20"},W={class:"types"},Y={class:"selbox"},Z={class:"uploadbox"},ee={class:"tablebox c-tablebox"},te={style:{display:"flex","align-items":"center"}},se={style:{"margin-left":"10px"}},le={style:{display:"flex","align-items":"center"}},oe={style:{"margin-left":"10px"}},ae={class:"c-emptybox"},ne={__name:"add",setup(ie){const c=A();N();const u=J(),r=p([]),h=(l,e)=>{r.value=e},w=l=>/\.(xlsx)$/i.test(l.name)?(u.commit("loading",!0),!0):(_this.$message("上传的文件格式不正确","error"),!1),k=l=>l<30?"#909399":l<70?"#e6a23c":"#67c23a",_=p("1001"),B=p({1001:"产品参数模板"});let g=p("/api/filedatabase/add?template_type="+_.value+"&knowledgebase_id="+c.query.id);const C=l=>{g.value="/api/filedatabase/add?template_type="+l+"&knowledgebase_id="+c.query.id},S=(l,e,v)=>{u.commit("loading",!1),r.value=[]},E=l=>{u.commit("loading",!1);let e=l.toString();e=e.replace("UploadAjaxError: ",""),e=JSON.parse(e),_this.$message(e.detail,"error")};return(l,e)=>{const v=n("el-option"),V=n("el-select"),q=n("el-icon"),L=n("el-upload"),m=n("el-table-column"),$=n("el-progress"),j=n("el-table"),z=n("el-scrollbar");return b(),x("div",P,[t("div",Q,[t("span",T,[t("span",{class:"c-pointer",style:{color:"#909BA5","margin-right":"5px"},onClick:e[0]||(e[0]=s=>i(K)(null,l.$router,i(c).query.fpath||"/dataset/excel?id="+i(c).query.id))},[d(f(i(c).query.name||"EXCEL参数库")+" ",1),e[3]||(e[3]=t("span",{class:"iconfont icon-xiangyoujiantou"},null,-1))]),e[4]||(e[4]=d(" 添加EXCEL"))])]),t("div",G,[o(z,null,{default:a(()=>[t("div",H,[t("div",W,[e[5]||(e[5]=t("span",{class:"label"},"模板类型：",-1)),t("div",Y,[o(V,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=s=>_.value=s),onChange:C,filterable:"",placeholder:"Select",style:{width:"300px"}},{default:a(()=>[(b(!0),x(U,null,M(B.value,(s,y)=>(b(),D(v,{key:y,label:s,value:y},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),t("div",Z,[o(L,{class:"upload-demo","file-list":r.value,"onUpdate:fileList":e[2]||(e[2]=s=>r.value=s),headers:{authorization:"Bearer "+i(u).state.token},"before-upload":w,"on-change":h,"show-file-list":!1,"on-error":E,"on-success":S,limit:15,multiple:"",drag:"",action:i(g)},{default:a(()=>[o(q,{class:"el-icon--upload"},{default:a(()=>[o(i(X))]),_:1}),e[6]||(e[6]=t("div",{class:"el-upload__text"},[d(" 点击或拖动文件到此处上传 "),t("br"),t("div",{class:"tip"},[d(" 支持 .xlsx 类型文件 "),t("br"),d("最多支持 15 个文件。单个文件最大 100 MB。 ")])],-1))]),_:1},8,["file-list","headers","action"])]),R(t("div",ee,[o(j,{data:r.value,style:{width:"100%"}},{empty:a(s=>[t("div",ae,[o(O,{type:"empzwssjg",width:"100",height:"100"}),e[7]||(e[7]=d("暂无数据~~"))])]),default:a(()=>[o(m,{label:"文件名"},{default:a(s=>[t("div",te,[t("span",se,f(s.row.name),1)])]),_:1}),o(m,{label:"进度条"},{default:a(s=>[o($,{percentage:s.row.status=="success"?s.row.percentage:Math.min(s.row.percentage,98),striped:"",color:k},null,8,["percentage"])]),_:1}),o(m,{label:"文件大小"},{default:a(s=>[t("div",le,[t("span",oe,f(s.row.size),1)])]),_:1})]),_:1},8,["data"])],512),[[F,r.value.length>0]])])]),_:1})])])}}},_e=I(ne,[["__scopeId","data-v-ef081eb7"]]);export{_e as default};
