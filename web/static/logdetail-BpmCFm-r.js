import{_ as N,aC as q,u as H,i as j}from"./index-B6WbZO8q.js";import{l as D,r as p,j as E,z as w,B as l,R as o,J as a,al as g,Q as I,aR as P,aS as $,A as u,L as _,u as s,I as f,O as i,P as c,E as A}from"./vue-CdYMfVVj.js";import{a as T}from"./comp-ClzPtuSi.js";import{r as F}from"./result-CcYZ99eM.js";import"./element-GwJlJi_X.js";import"./editor-Dhn2M38E.js";const J={class:"pagelistbox"},O={class:"c-tablebox tableboxContain c-tooltip"},Q={class:"bodybox"},U={class:"ellipsis2"},G={style:{margin:"0 -20px"}},K=["innerHTML"],W={class:"ellipsis2"},X={style:{margin:"0 -20px"}},Y=["innerHTML"],Z=["onClick"],ee=["onClick"],te={class:"c-emptybox"},ae={key:0,class:"c-pagination"},le={__name:"logdetail",props:{id:{type:[String,Number],default:()=>0}},setup(V){const k=P();$(),H();const b=V;let d=D({id:b.id||0});const h=p(0);E(()=>b.id,async(n,t)=>{console.log(n),n!==t&&n&&m("init")});let x=p([]);const m=n=>{n=="init"&&(d.page=1),q({id:b.id}).then(t=>{x.value=t||[]})};m("noquery");const M=p(null),C=p({}),v=p(!1),z=(n,t)=>{if(!n)return!1;C.value={id:n},v.value=!0};return(n,t)=>{const r=g("el-table-column"),y=g("el-scrollbar"),S=g("el-popover"),R=g("el-table"),B=g("el-pagination");return u(),w(I,null,[l("div",J,[l("div",O,[l("div",Q,[o(y,{ref_key:"scrollbarRef",ref:M},{default:a(()=>[o(R,{"tooltip-effect":"light",border:"",data:s(x),style:{width:"100%"}},{empty:a(e=>[l("div",te,[o(j,{type:"empzwssjg",width:"100",height:"100"}),t[7]||(t[7]=i("暂无数据~~ "))])]),default:a(()=>[o(r,{prop:"id",width:"70",label:"id"}),o(r,{label:"参考答案"},{default:a(e=>[e.row.right_answer?(u(),f(S,{key:0,placement:"top-start",width:500,trigger:"hover"},{reference:a(()=>[l("div",U,[t[3]||(t[3]=l("span",{class:"c-success-btn c-mini"},"参",-1)),i(" "+c(e.row.right_answer),1)])]),default:a(()=>[l("div",G,[o(y,{"max-height":"400"},{default:a(()=>[l("div",{innerHTML:e.row.right_answer.replace(/\n/g,"<br>"),style:{margin:"0 20px"}},null,8,K)]),_:2},1024)])]),_:2},1024)):_("",!0)]),_:1}),o(r,{label:"最终回答"},{default:a(e=>[e.row.test_answer?(u(),f(S,{key:0,placement:"top-start",width:500,trigger:"hover"},{reference:a(()=>[l("div",W,[t[4]||(t[4]=l("span",{class:"c-warn-btn c-mini"},"终",-1)),i(" "+c(e.row.test_answer),1)])]),default:a(()=>[l("div",X,[o(y,{"max-height":"400"},{default:a(()=>[l("div",{innerHTML:e.row.test_answer.replace(/\n/g,"<br>"),style:{margin:"0 20px"}},null,8,Y)]),_:2},1024)])]),_:2},1024)):_("",!0)]),_:1}),o(r,{width:"160",align:"center","show-overflow-tooltip":"",label:"结果"},{default:a(e=>[l("span",{class:A({"c-success-btn":e.row.test_result_name=="成功","c-danger-btn":e.row.test_result_name!="成功"})},c(e.row.test_result_name),3)]),_:1}),s(k).query.tag=="S"?(u(),f(r,{key:0,width:"260",label:"模型名称"},{default:a(e=>[i(c(e.row.execute_llm_name),1)]),_:1})):_("",!0),s(k).query.tag!="S"?(u(),f(r,{key:1,width:"180",align:"right",label:"流程名称"},{default:a(e=>[i(c(e.row.execute_workflow_name),1)]),_:1})):_("",!0),o(r,{width:"80",align:"right",label:"评分"},{default:a(e=>[i(c(e.row.score),1)]),_:1}),o(r,{width:"160",align:"center",label:"执行时间"},{default:a(e=>[i(c(s(T)(e.row.updated_at)||s(T)(e.row.created_at)),1)]),_:1}),o(r,{width:"160",align:"right",label:"操作"},{default:a(e=>[e.row.test_workflow_log_id?(u(),w("div",{key:0,onClick:L=>z(e.row.test_workflow_log_id,1),class:"c-table-ibtn"},t[5]||(t[5]=[l("span",{class:"iconfont icon-liebiao-ceshi"},null,-1),i(" 测试详情 ")]),8,Z)):_("",!0),e.row.workflow_log_id?(u(),w("div",{key:1,onClick:L=>z(e.row.workflow_log_id,2),class:"c-table-ibtn"},t[6]||(t[6]=[l("span",{class:"iconfont icon-liebiao-xiangqing"},null,-1),i(" 用例详情 ")]),8,ee)):_("",!0)]),_:1})]),_:1},8,["data"]),h.value>0?(u(),w("div",ae,[o(B,{"hide-on-single-page":!1,background:"","page-size":s(d).pagesize,"current-page":s(d).page,onSizeChange:t[0]||(t[0]=e=>{s(d).pagesize=e,s(d).page=Math.min(Math.ceil(h.value/s(d).pagesize),s(d).page),m()}),onCurrentChange:t[1]||(t[1]=e=>{s(d).page=e,m()}),"page-sizes":[30,50,100,900],layout:"total,sizes,jumper,prev, pager, next",total:h.value},null,8,["page-size","current-page","total"])])):_("",!0)]),_:1},512)])])]),o(F,{modelValue:v.value,"onUpdate:modelValue":t[2]||(t[2]=e=>v.value=e),data:C.value},null,8,["modelValue","data"])],64)}}},ue=N(le,[["__scopeId","data-v-699b8424"]]);export{ue as default};
